<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/..\FrameXML\UI.xsd">

	<!--QuestItem Button Template -->
	<Button name="CTWItemButtonTemplate" hidden="true" inherits="LargeItemButtonTemplate, QuestInfoRewardItemCodeTemplate" virtual="true">
	
		<Size x="48" y="48"/>
		
		<Backdrop edgeFile="Interface\DialogFrame\UI-DialogBox-Border" tile="true">
			<BackgroundInsets>
				<AbsInset left="6" right="6" top="6" bottom="6"/>
			</BackgroundInsets>
			<TileSize>
				<AbsValue val="22"/>
			</TileSize>
			<EdgeSize>
				<AbsValue val="22"/>
			</EdgeSize>
		</Backdrop>
		
		<Scripts>
			<OnLoad>
				self.type = "choice";
				self.objectType = "item";
			
				_G[self:GetName().."NameFrame"]:Hide();
				_G[self:GetName().."Name"]:Hide();
				
				_G[self:GetName().."IconTexture"]:SetTexCoord(0.075,0.925,0.075,0.925);
				_G[self:GetName().."IconTexture"]:SetSize(38,38);
				_G[self:GetName().."IconTexture"]:ClearAllPoints();
				_G[self:GetName().."IconTexture"]:SetPoint("CENTER", self, 0, 0);
			</OnLoad>
			
			<OnEnter>
				GameTooltip:SetParent(CatchTheWind);
				GameTooltip:SetFrameStrata("TOOLTIP");
				
				GameTooltip:SetOwner(self, "ANCHOR_RIGHT");
				GameTooltip:SetQuestItem(self.type, self:GetID());
				
				if(IsShiftKeyDown()) then
					for i=1,2 do
						_G["ShoppingTooltip"..i]:SetParent(CatchTheWind);
						_G["ShoppingTooltip"..i]:SetFrameStrata("TOOLTIP");
					end
					CTW_GameTooltip_ShowCompareItem(GameTooltip);
				end
			</OnEnter>
			
			<OnLeave>
				GameTooltip:SetParent(UIParent);
				GameTooltip:SetFrameStrata("TOOLTIP");
				GameTooltip:Hide();
				for i=1,2 do
					_G["ShoppingTooltip"..i]:SetParent(UIParent);
					_G["ShoppingTooltip"..i]:SetFrameStrata("TOOLTIP");
				end
				ResetCursor();
			</OnLeave>
			
			<OnClick>
				if ( IsModifiedClick("DRESSUP") ) then
					CTW_DressUpItemLink(GetQuestItemLink(self.type, self:GetID()));
				else
					for i=1, GetNumQuestChoices() do
						_G["CTWrewardPanelItem"..i.."IconTexture"]:SetVertexColor(0.35,0.35,0.35,1);
					end
					_G[self:GetName().."IconTexture"]:SetVertexColor(1,1,1,1);
					QuestInfoItem_OnClick(self);
				end
			</OnClick>
		</Scripts>
		
	</Button>


	<!-- DressUpModel used to show rewards' look -->
	<!-- TODO: Since most GUI is not in XML, in CatchTheWind.lua there are some "OnLoad" style calls in setUpLetterBox() function -->
	<DressUpModel name="CTWDressUpModel" scale="2.0" inherits="ModelWithControlsTemplate" hidden="true">
		<Size x="400" y="330"/>

		<Scripts>
			<OnLoad>
				Model_OnLoad(self, MODELFRAME_MAX_PLAYER_ZOOM);
			</OnLoad>
		</Scripts>
	</DressUpModel>
	
	
	<!-- Frame that contains information about the addOn -->
	<Frame name="CTWHelpFrame" hidden="true">
		<Size x="320" y="150"/>
		
		<Anchors>
			<Anchor point="CENTER"/>
		</Anchors>
		
		<Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background" edgeFile="Interface\DialogFrame\UI-DialogBox-Border" tile="true">
			<BackgroundInsets>
				<AbsInset left="11" right="12" top="12" bottom="11"/>
			</BackgroundInsets>
			<TileSize>
				<AbsValue val="32"/>
			</TileSize>
			<EdgeSize>
				<AbsValue val="32"/>
			</EdgeSize>
		</Backdrop>
		
		<Layers>
			<Layer level="ARTWORK">
				<FontString name="$parentText" parentKey="text" justifyH="LEFT" inherits="GameFontNormal">
					<Size x="290" y="140"/>
					
					<Anchors>
						<Anchor point="CENTER"/>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		
		<Scripts>
			<OnLoad>
				self.text:SetText([[Help Frame:

[A] and [D]- Moves between options
[SPACE] - Skips text and clicks selected option
[ESCAPE] - Stops quest interaction
[F1] - Toggles Help Frame
[F10] - Hide addOn
[F12] - Takes a screenshot]])
			</OnLoad>
		</Scripts>
	</Frame>
 
</Ui>